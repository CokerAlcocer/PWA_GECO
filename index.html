<!DOCTYPE html>
<html lang="en" ng-app="GECO_PWA">
<head>
    <span ng-include src="'./view/template/headers.html'"></span>
    <title>LaboRed | Inicio de sesión</title>
</head>
<body ng-controller="LOGIN_CONTROLLER" >
    <!-- # Barra de navegación superior -->
    <div class="upperbar">
        <!-- <img src="https://placehold.co/50x50/000000/FFF" alt="Palcehold.co"> -->
        <img src="./assets/images/logo2.jpeg" alt="xd" width="50" height="50" class="rounded">
        <span class="ms-2 text-white fw-bold">LaboRed | Gestor de Servicios</span>
    </div>
    <!-- # Barra de navegación superior -->

    <!-- # Contenido de la página -->
    <div class="page-container">
        <div class="row px-0 py-5 m-0" style="overflow-y: auto;">
            <!-- # Formulario de inicio de sesión -->
            <div ng-if="form" class="col-12 col-lg-6">
                <div class="d-flex align-items-center justify-content-center" style="height: 100%;">
                    <div class="card mb-5 col-11 col-lg-8 border-0 shadow">
                        <div class="card-body">
                            <p class="d-flex align-items-center justify-content-center">
                                <span class="fs-3 fw-bold text-principal">LaboRed</span>
                                <span style="height: 30px; width: 1px;" class="bg-dark mx-2"></span>
                                <span class="fs-5 fw-lighter"> Inicio de Sesión</span>
                            </p>
                            <form class="mt-4" name="loginForm">
                                <div class="row g-4">
                                    <div class="col-12 form-group overlay">
                                        <input type="text" id="user" name="user" ng-model="user.email" pattern="[^@\s]+@[^@\s]+\.[^@\s]+" ng-trim="false" required class="geco-input" autocomplete="off"> 
                                        <label for="">Usuario o correo electrónico</label>
                                        <span ng-if="loginForm.user.$touched && (loginForm.user.$error.required) && !loginForm.user.$error.pattern" class="error-info">Este campo es obligatorio</span>
                                        <span ng-if="loginForm.user.$error.pattern" class="error-info">Este campo solo acepta</span>
                                    </div>
                                    <div class="col-12 form-group overlay">
                                        <input type="password" id="password" name="password" ng-model="user.password"  required class="geco-input" autocomplete="off" minlength="2">
                                        <label for="">Contraseña</label>
                                        <span ng-if="loginForm.password.$touched && (loginForm.password.$error.required) && !loginForm.password.$error.pattern" class="error-info">Este campo es obligatorio</span>
                                        <span ng-if="loginForm.password.$error.pattern" class="error-info">Este campo solo acepta</span>
                                    </div>
                                    <div class="col-12">
                                        <button ng-if="loginForm.$invalid" type="button" class="btn btn-secondary mt-3 py-2 col-12" disabled>Iniciar sesión</button>
                                        <button ng-if="loginForm.$valid" type="submit" class="btn btn-secondary mt-3 py-2 col-12">Iniciar sesión</button>
                                        <a class="btn btn-outline-secondary mt-3 py-2 col-12" ng-click="changeForm()">¡Registrate!</a>
                                        <p class="text-center mt-4"><a href="">¿Olvidaste tu contraseña?</a></p>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <!-- # Formulario de inicio de sesión -->
            
            <!-- # Formulario de registro -->
            <div ng-if="!form" class="col-12 col-lg-6 mb-5 mb-lg-0">
                <div class="d-flex align-items-center justify-content-center" style="height: 100%;">
                    <div class="card col-11 col-lg-8 border-0 shadow">
                        <div class="card-body">
                            <p class="d-flex align-items-center justify-content-center">
                                <span class="fs-3 fw-bold text-principal">LaboRed</span>
                                <span style="height: 30px; width: 1px;" class="bg-dark mx-2"></span>
                                <span class="fs-5 fw-lighter"> Formulario de Registro</span>
                            </p>
                            <form class="mt-4" name="registerForm">
                                <div class="row g-4">
                                    <div class="col-12 text-center">
                                        <h6 class="mt-3 text-muted">Datos del usuario</h6>
                                    </div>
                                    <div class="col-12 form-group overlay">
                                        <input type="text" id="name" name="name" ng-model="register.name" pattern="^[A-Za-z]*$"  required class="geco-input" autocomplete="off">
                                        <label for="">Nombre</label>
                                        <span ng-if="registerForm.name.$touched && (registerForm.name.$error.required) && !registerForm.name.$error.pattern" class="error-info">Este campo es obligatorio</span>
                                        <span ng-if="registerForm.name.$error.pattern" class="error-info">Este campo solo acepta letras</span>
                                    </div>
                                    <div class="col-12 col-md-6 form-group overlay">
                                        <input type="text" id="surname" name="surname" ng-model="register.surname" pattern="^[A-Za-z]*$" required class="geco-input" autocomplete="off">
                                        <label for="">Apellido Paterno</label>
                                        <span ng-if="registerForm.surname.$touched && (registerForm.surname.$error.required) && !registerForm.surname.$error.pattern" class="error-info">Este campo es obligatorio</span>
                                        <span ng-if="registerForm.surname.$error.pattern" class="error-info">Este campo solo acepta letras</span>
                                    </div>
                                    <div class="col-12 col-md-6 form-group overlay">
                                        <input type="text" id="lastname" name="lastname" ng-model="register.lastname" pattern="^[A-Za-z]*$" class="geco-input" autocomplete="off">
                                        <label for="">Apellido Materno</label>
                                        <span ng-if="registerForm.lastname.$touched && !registerForm.lastname.$error.pattern" class="error-info text-primary">Este campo es opcional</span>
                                        <span ng-if="registerForm.lastname.$error.pattern" class="error-info">Este campo solo acepta letras</span>
                                    </div>
                                    <div class="col-12 col-md-6 form-group overlay">
                                        <input type="text" id="email" name="email" ng-model="register.email" pattern="[^@\s]+@[^@\s]+\.[^@\s]+" required class="geco-input" autocomplete="off">
                                        <label for="">Correo electrónico</label>
                                        <span ng-if="registerForm.email.$touched && (registerForm.email.$error.required) && !registerForm.email.$error.pattern" class="error-info">Este campo es obligatorio</span>
                                        <span ng-if="registerForm.email.$error.pattern" class="error-info">Correo invalido</span>
                                    </div>
                                    <div class="col-12 col-md-6 form-group overlay">
                                        <input type="text" id="phone" name="phone" ng-model="register.phone"  required class="geco-input" autocomplete="off">
                                        <label for="">Telefono</label>
                                        <span ng-if="registerForm.phone.$touched && (registerForm.phone.$error.required)" class="error-info">Este campo es obligatorio</span>
                                    </div>
                                    <div class="col-12 col-md-6 form-group overlay">
                                        <label for="">Dirección</label>
                                        <textarea name="address" ng-model="register.address" required class="geco-input" autocomplete="off"></textarea>
                                        <span ng-if="registerForm.address.$touched && (registerForm.address.$error.required)" class="error-info">Este campo es obligatorio</span>
                                    </div>
                                    <div class="col-12 col-md-6 form-group overlay">
                                        <label for="">Rol</label>
                                        <select class="form-select" ng-model="register.role" name="rol" aria-label="Large select example" required>
                                            <option value="Cliente">Cliente</option>
                                            <option value="Proveedor">Proveedor</option>
                                        </select>
                                        <span ng-if="registerForm.rol.$touched && (registerForm.rol.$error.required)" class="error-info">Este campo es obligatorio</span>
                                    </div>
                                    <div class="col-12 col-md-6 form-group overlay">
                                        <input type="password" id="password" name="password" ng-model="register.password"  required class="geco-input" autocomplete="off">
                                        <label for="">Contraseña</label>
                                        <span ng-if="registerForm.password.$touched && (registerForm.password.$error.required) && !registerForm.password.$error.pattern" class="error-info">Este campo es obligatorio</span>
                                    </div>
                                    <div class="col-12 col-md-6 form-group overlay">
                                        <input type="password" id="confirmation" name="confirmation" ng-model="register.passwordConfirmation"  required class="geco-input" autocomplete="off">
                                        <label for="">Confirmar contraseña</label>
                                        <span ng-if="registerForm.confirmation.$touched && (registerForm.confirmation.$error.required) && !registerForm.confirmation.$error.pattern" class="error-info">Este campo es obligatorio</span>
                                        <span ng-if="register.passwordConfirmation != undefined && register.password != register.passwordConfirmation" class="error-info">Contraseñas no coinciden</span>
                                    </div>
                                    <div class="col-12">
                                        <button ng-disabled="registerForm.$invalid || ( register.passwordConfirmation == undefined || register.password) && register.password != register.passwordConfirmation" type="submit" class="btn btn-secondary mt-3 py-2 col-12" ng-click="registrar(register)">Registrarme</button>
                                        <a class="btn btn-outline-secondary mt-3 py-2 col-12" ng-click="changeForm()">Iniciar sesión</a>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <!-- # Formulario de registro -->
            
            <!-- # Iconon de la aplicación -->
            <div class="col-12 col-lg-6 hidden">
                <div class="d-flex justify-content-center align-items-start" style="height: 100%;">
                    <!-- <img src="https://placehold.co/500x500/000000/FFF" alt=""> -->
                    <img src="./assets/images/logo2.jpeg" alt="xd" width="500" height="500" class="rounded img-fluid">
                </div>
            </div>
            <!-- # Iconon de la aplicación -->
        </div>
    </div>
    <!-- # Contenido de la página -->

    <script src="./assets/js/angular.min.js"></script>
    <script src="./assets/js/toastify-js.js"></script>
    <script src="./assets/js/jquery-3.7.1.min.js"></script>
    <script src="./assets/js/app.js"></script>
    <script src="./assets/js/controllers/login.controller.js"></script>
</body>
</html>